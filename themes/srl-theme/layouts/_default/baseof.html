<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ .Site.Title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/style.css">
  <!-- Swiper CSS -->
  <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
  />
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <div class="logo">
    <a class="logo logo-video-wrapper" href="{{ .Site.BaseURL }}">
      <video class="logo-img" autoplay muted loop playsinline>
        <source src="/~shahdy/srl-hugo-test/images/srlLogo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </a>
  </div>

  <!-- Hamburger icon for mobile -->
  <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
    &#9776;
  </button>

  <div class="nav-links" id="navLinks">
    <a data-target="aboutus">About Us</a>
    <a data-target="blog">Blog</a>
    <a data-target="projects">Projects</a>
    <a data-target="publications">Publications</a>
    <a data-target="personnel">Personnel</a>
    <a data-target="faq">FAQ</a>    
  </div>
</nav>

<main id="top">
  {{ block "main" . }}{{ end }}
</main>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  const swiper = new Swiper('.swiper', {
    loop: true,
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
  });
</script>

<script>
  const navToggle = document.getElementById('navToggle');
  const navLinks = document.getElementById('navLinks');

  navToggle.addEventListener('click', function () {
    navLinks.classList.toggle('open');
    navToggle.classList.toggle('open');

    // Swap icon between hamburger and X
    navToggle.innerHTML = navToggle.classList.contains('open') ? '&#10005;' : '&#9776;';
  });

  // Close menu when any link is clicked
  navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      navLinks.classList.remove('open');
      navToggle.classList.remove('open');
      navToggle.innerHTML = '&#9776;'; // Reset icon to hamburger
    });
  });
</script>

<script>
  // Get the base URL from Hugo's config and remove the trailing slash if it exists
  const base = "{{ .Site.BaseURL }}".replace(/\/$/, "");
  const currentURL = window.location.href;
  const homeURL = window.location.origin + base;

  // Check if the user is currently on the homepage (with or without trailing slash)
  const isHome = currentURL === homeURL || currentURL === homeURL + "/";

  document.querySelectorAll('.nav-links a').forEach(link => {
    const target = link.getAttribute('data-target');
    if (isHome) {
      link.setAttribute('href', `#${target}`);
    } else {
      link.setAttribute('href', `${base}/${target}/`);
    }
  });
</script>


</body>
</html>
