{{ define "main" }}

<section class="projects-intro section-white">
  <h1>{{ .Site.Data.projects.intro.title }}</h1>
  <p>
    {{ .Site.Data.projects.intro.text | markdownify }}
  </p>
</section>

<div class="projects-container">

  <!-- Sidebar navigation -->
  <nav class="projects-sidebar">
    <ul>
      <li class="sidebar-label"><strong>Available Projects</strong></li>
      {{ range .Site.Data.projects.projects }}
        <li><a href="#{{ .id }}">{{ .name }}</a></li>
      {{ end }}

      <li class="sidebar-label"><strong>Past Projects</strong></li>
      {{ range .Site.Data.projects.past_projects }}
        <li><a href="#{{ .id }}">{{ .name }}</a></li>
      {{ end }}
    </ul>
  </nav>

  <!-- Project content -->
  <article class="projects-main">
    
    <!-- Available Projects Section -->
    <section class="projects-section-title">
      <h2>Electrical and Computer</h2>
    </section>

    {{ range .Site.Data.projects.projects }}
      <section id="{{ .id }}" class="project-section">
        {{ if .image }}
          <div class="project-with-image">
            <h2>{{ .name }}</h2>
            <p>
              <span class="project-float-wrapper">
                <img src="{{ "images/" | relURL }}{{ .image }}" alt="{{ .name }}" class="project-float-icon" />
              </span>
              {{ .description | markdownify }}
            </p>
          </div>
        {{ else }}
          <h2>{{ .name }}</h2>
          <p>{{ .description | markdownify }}</p>
        {{ end }}
      </section>
    {{ end }}

    <!-- Past Projects Section -->
    <section class="projects-section-title">
      <h2>Electrical and Computer â€“ Past Projects</h2>
    </section>

    {{ range .Site.Data.projects.past_projects }}
      <section id="{{ .id }}" class="project-section">
        {{ if .image }}
          <div class="project-with-image">
            <h2>{{ .name }}</h2>
            <p>
              <span class="project-float-wrapper">
                <img src="{{ "images/" | relURL }}{{ .image }}" alt="{{ .name }}" class="project-float-icon" />
              </span>
              {{ .description | markdownify }}
            </p>
          </div>
        {{ else }}
          <h2>{{ .name }}</h2>
          <p>{{ .description | markdownify }}</p>
        {{ end }}
      </section>
    {{ end }}

  </article>

</div>

<script>
  const sidebarLinks = document.querySelectorAll(".projects-sidebar a");
  const intro = document.querySelector(".projects-intro");

  // Hide intro on click
  sidebarLinks.forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const targetId = link.getAttribute("href").substring(1);
      const target = document.getElementById(targetId);

      if (intro) intro.style.display = "none";

      if (target) {
        target.scrollIntoView({ behavior: "smooth", block: "start" });
        history.replaceState(null, "", "#" + targetId);
      }
    });
  });

  // Show intro again when scrolling to top
  window.addEventListener("scroll", () => {
    // Show intro if scrolled to (or near) the top
    if (window.scrollY < 10) {
      if (intro) intro.style.display = "block";
    }
  });
</script>


{{ end }}